# 테스트에 필요한 개념

### System Under Test(SUT)

- 테스트 대상 시스템, 즉, 테스트 하려는 대상
- given, when, then 에서 when에 해당하는 부분

### Behavior Driven Development(BDD)

- 테스트 코드를 작성할 때, 행위에 집중하는 방법론
    - 기본적으로 TDD에 포함되어 있음
- 어디에 어떻게 테스트를 넣어야하는지에 대한 구조를 제공해준다
    - given, when, then

### Interaction Test(상호작용 테스트)

- 대상 함수 구현을 호출하지 않으면서 그 함수가 어떻게 호출되는지 검증하는 기법
    - mockito, mockk 등을 사용
- 내부 구현을 어떻게 했는지, 즉 구현에 집중하기에 사실 좋은 방법은 아닐 수 있다

### 상태 기반 검증(State-based Verification) vs 행위 기반 검증(Bevavior-based Verification)

- 상태 기반 검증
    - 어떤 값을 시스템 넣었을 때 나오는 값을 기댓값과 비교
- 행위 기반 검증
    - 어떤 값을 시스템에 넣었을 때, 협력 객체의 어떤 메서드를 호출하는지 검증
    - 앞서 언급한 상호작용 테스트로 볼 수 있음
    - BDD의 Behavior를 말하는 건 아님!!

### Test Fixture

- 테스트에 필요한 자원이나 환경을 생성하는 것
    - SUT 자체가 될 수도 있고, SUT에 들어가는 의존성 일부가 될 수도 있음
- 테스트가 한 눈에 안들어 올 수도 있음
    - 하지만 코드 중복이 심하게 발생하면 사용해도 좋음

### Beyonce Rule(비욘세 규칙)

- `구글 엔지니어는 이렇게 일한다`에서 나오는 규칙
- `유지하고 싶은 상태나 정책이 있다면 테스트를 만들어야 한다`
    - 즉, 유지하고 싶은 상태가 있다면 전부 테스트로 작성해야 한다
- 테스트는 정책이고 곧 계약이다

### Testability

- 테스트 가능성
- 테스트 가능한 구조인가?

### Test Double

- 테스트를 위해 사용하는 가짜 객체

---

## 테스트 대역

Test Double에서 말하는 가짜 객체의 종류

### Dummy

- 아무런 동작도 하지 않고, 그저 코드가 돌아가기위해 전달하는 객체
- 테스트에 필요한 인자를 전달하기 위해 사용하는 객체

### Fake

- Local에서 사용하거나 테스트에서 사용하기 위해 만들어진 가짜 객체
    - `실제 동작하는 객체`지만, 실제로 사용하기에는 부적합하지만 이를 변형해서 개발할 떄 큰 도움이 됨

### Stub

- 미리 준비된 값을 출력하는 객체
    - 테스트에서 호출되면 미리 준비된 값을 출력하는 객체
- 보통 mockito 프레임워크를 이용해 많이 구현

### Mock

- 메소드 호출을 확인하기 위한 객체, 자체 검증 능력을 갖추고 있다
- Test double과 동일한 의미로 사용되어 모든 테스트 대역을 Mock이라고 부르기도 한다

### Spy

- 메소드 호출을 기록했다가 나중에 확인하기 위한 객체
    - 메서드가 몇 번 호출되었는지, 잘 호출되었는지 검증